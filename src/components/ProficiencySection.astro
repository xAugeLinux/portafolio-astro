---
---

<section class="proficiency-section" id="proficiency-section">
  <div class="proficiency-content">
    <h2 class="proficiency-title">Proficiency</h2>
    <div class="skills-grid">
      <div class="skill-card" data-percentage="95">
        <div class="skill-name skill-name-1">React</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-1)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-1"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#9dddd4;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#88d4c9;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#76cfc5;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-1">
            <span class="skill-percentage" data-target="95">0</span>%
          </div>
        </div>
      </div>
      <div class="skill-card" data-percentage="90">
        <div class="skill-name skill-name-2">JavaScript</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-2)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-2"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#ffd966;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#ffc933;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#ffb400;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-2">
            <span class="skill-percentage" data-target="90">0</span>%
          </div>
        </div>
      </div>
      <div class="skill-card" data-percentage="88">
        <div class="skill-name skill-name-3">TypeScript</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-3)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-3"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#e88b8b;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#ea7876;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#ec6664;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-3">
            <span class="skill-percentage" data-target="88">0</span>%
          </div>
        </div>
      </div>
      <div class="skill-card" data-percentage="85">
        <div class="skill-name skill-name-4">Vue.js</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-4)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-4"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#e88b8b;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#ea7876;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#ec6664;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-4">
            <span class="skill-percentage" data-target="85">0</span>%
          </div>
        </div>
      </div>
      <div class="skill-card" data-percentage="92">
        <div class="skill-name skill-name-5">Node.js</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-5)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-5"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#9dddd4;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#88d4c9;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#76cfc5;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-5">
            <span class="skill-percentage" data-target="92">0</span>%
          </div>
        </div>
      </div>
      <div class="skill-card" data-percentage="87">
        <div class="skill-name skill-name-6">CSS</div>
        <div class="circular-progress">
          <svg class="progress-ring" width="180" height="180">
            <circle
              class="progress-ring-circle-bg"
              stroke="#f0f0f0"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"></circle>
            <circle
              class="progress-ring-circle"
              stroke="url(#gradient-6)"
              stroke-width="10"
              fill="transparent"
              r="80"
              cx="90"
              cy="90"
              stroke-dasharray="502.65"
              stroke-dashoffset="502.65"
              data-circumference="502.65"></circle>
            <defs>
              <linearGradient
                id="gradient-6"
                gradientUnits="userSpaceOnUse"
                x1="90"
                y1="10"
                x2="170"
                y2="90"
              >
                <stop offset="0%" style="stop-color:#ffd966;stop-opacity:1"
                ></stop>
                <stop offset="50%" style="stop-color:#ffc933;stop-opacity:1"
                ></stop>
                <stop
                  offset="100%"
                  style="stop-color:#ffb400;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
          </svg>
          <div class="circular-progress-text skill-color-6">
            <span class="skill-percentage" data-target="87">0</span>%
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Number animation: count from 0 to target
  function animateNumber(
    element: HTMLElement,
    target: number,
    duration = 2000
  ) {
    const start = 0;
    const startTime = performance.now();

    function update(currentTime: number) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);

    // Ease-out function
      const easeOutQuart = 1 - Math.pow(1 - progress, 4);
      const current = Math.floor(start + (target - start) * easeOutQuart);

      element.textContent = current.toString();

      if (progress < 1) {
        requestAnimationFrame(update);
      } else {
        element.textContent = target.toString();
      }
    }

    requestAnimationFrame(update);
  }

  // Circular progress animation
  function animateCircularProgress(
    circle: SVGCircleElement,
    percentage: number,
    duration = 2000
  ) {
    const circumference = parseFloat(
      circle.getAttribute("data-circumference") || "502.65"
    );
    const startTime = performance.now();
    const offset = circumference;

    function update(currentTime: number) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);

    // Ease-out function
      const easeOutQuart = 1 - Math.pow(1 - progress, 4);
      const currentPercentage = percentage * easeOutQuart;
      const currentOffset =
        circumference - (currentPercentage / 100) * circumference;

      circle.style.strokeDashoffset = currentOffset.toString();

      if (progress < 1) {
        requestAnimationFrame(update);
      } else {
        circle.style.strokeDashoffset = (
          circumference -
          (percentage / 100) * circumference
        ).toString();
      }
    }

    requestAnimationFrame(update);
  }

  // Use Intersection Observer to trigger on scroll
  const proficiencySection = document.getElementById("proficiency-section");
  let hasAnimated = false;

  if (proficiencySection) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && !hasAnimated) {
            hasAnimated = true;

            // Get all skill cards
            const skillCards =
              proficiencySection.querySelectorAll(".skill-card");

            skillCards.forEach((card, index) => {
              setTimeout(() => {
                const percentageElement = card.querySelector(
                  ".skill-percentage"
                ) as HTMLElement;
                const progressCircle = card.querySelector(
                  ".progress-ring-circle"
                ) as SVGCircleElement;
                const percentage = parseInt(
                  card.getAttribute("data-percentage") || "0"
                );

                if (percentageElement && progressCircle) {
                  // Start number animation
                  animateNumber(percentageElement, percentage);

                  // Start circular progress animation
                  animateCircularProgress(progressCircle, percentage);
                }
              }, index * 150); // Stagger each skill by 150ms
            });
          }
        });
      },
      {
        threshold: 0.3, // Trigger when 30% is visible
      }
    );

    observer.observe(proficiencySection);
  }
</script>

